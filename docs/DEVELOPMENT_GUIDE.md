# Development Guide

Comprehensive development setup, commands, and best practices.

## Development Commands

### GitHub Scripts
```bash
# Navigate to scripts directory
cd .github/scripts

# Install dependencies
npm install

# Run individual components
node activity-analyzer.js    # Analyze GitHub activity
node claude-enhancer.js      # AI content enhancement
node cv-generator.js         # Generate CV website

# Run tests
npm test                     # Run all tests
npm run lint                 # ESLint validation
```

### Debugging & Troubleshooting
```bash
# Check data file consistency (after activity analysis)
find data/ -name "github-activity-*" | head -3
find data/ -name "professional-development-*" | head -3
find data/ -name "activity-trends-*" | head -3

# Verify PDF generation
ls -la dist/assets/adrian-wedd-cv.pdf
file dist/assets/adrian-wedd-cv.pdf

# Test data file references
node -e "const s=require('./data/activity-summary.json'); console.log('Files:', s.data_files);"
```

### Local Development
```bash
# Serve locally (use any static server)
python -m http.server 8000
# OR
npx serve .
```

### Validation
```bash
# Validate JSON data files
for file in data/*.json; do jq . "$file" > /dev/null && echo "âœ… $file valid"; done

# Check workflow syntax
cd .github/scripts && npm run lint
```

### Testing Workflows Locally
```bash
# Test activity analysis
cd .github/scripts
GITHUB_TOKEN=your_token node activity-analyzer.js

# Test AI enhancement (requires API key)
ANTHROPIC_API_KEY=your_key node claude-enhancer.js

# Test CV generation
node cv-generator.js
```

## When Making Changes

1. **Data Updates**: Modify `data/base-cv.json` for core CV information
2. **Styling**: Use CSS custom properties in `assets/styles.css` for consistency
3. **Functionality**: JavaScript in `assets/script.js` follows ES6+ standards
4. **Workflows**: Test changes to `.github/workflows/` files carefully as they run on schedule

## Common Tasks

- **Update CV content**: Edit `data/base-cv.json`
- **Modify styling**: Use CSS custom properties in `assets/styles.css`
- **Add new sections**: Update both data structure and HTML template
- **Adjust automation**: Modify workflow schedules or enhancement strategies
- **Update authentication**: Refresh cookies or change auth strategy

## Important Constraints

- All AI enhancements must respect token budgets (browser mode: unlimited)
- GitHub API calls are rate-limited, use caching appropriately
- Workflows commit changes automatically - avoid conflicts
- PDF generation requires headless browser capabilities in CI
- Browser authentication requires valid Claude.ai session cookies

## Data Structure

### base-cv.json Schema
```json
{
  "metadata": { "version", "last_updated", "enhancement_ready" },
  "personal_info": { "name", "title", "location", "contact_info" },
  "professional_summary": "string",
  "experience": [{ "position", "company", "period", "achievements", "technologies" }],
  "projects": [{ "name", "description", "technologies", "metrics", "github" }],
  "skills": [{ "name", "category", "level", "proficiency", "experience_years" }],
  "achievements": [{ "title", "description", "date", "metrics" }],
  "education": [{ "degree", "institution", "key_areas" }]
}
```

## Frontend Features

### Modern Web Standards
- Responsive CSS Grid and Flexbox layouts
- Progressive enhancement (works without JavaScript)
- Dark/light theme switching with localStorage persistence
- Smooth scroll navigation with URL hash management
- Structured data for SEO optimization

### Performance Optimizations
- Lazy loading for non-critical content
- CSS custom properties for consistent theming
- Minimal JavaScript footprint
- Optimized font loading with preconnect

## Debugging Best Practices

1. Always verify file existence before referencing in workflows
2. Use comprehensive logging in critical workflow steps
3. Test CSS changes across multiple browsers and themes
4. Validate JSON structure after AI enhancement processes
5. Monitor workflow failures for race conditions and timeouts

## AI Enhancement System

### Token Management
- Budget tracking per creativity level (conservative: 15k, balanced: 25k, creative: 40k, innovative: 60k daily)
- Session limits to prevent overuse
- Intelligent caching to optimize API calls
- **Browser mode**: No token limits (uses web interface)

### Enhancement Strategy
- **Comprehensive**: Full analysis and optimization
- **Activity-only**: GitHub metrics only
- **AI-only**: Content optimization only
- **Emergency**: Minimal processing for urgent updates
